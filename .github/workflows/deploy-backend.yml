name: Deploy Backend to Render

on:
  # Se activa solo cuando haces push a la rama main...
  push:
    branches:
      - main
    # ...Y solo si los cambios ocurrieron dentro de la carpeta 'backend'
    paths:
      - 'backend/**'

  # Permite ejecutarlo manualmente
  workflow_dispatch:

jobs:
  deploy-backend:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render Deploy Hook
        # Este comando simplemente envía una señal a la URL secreta
        run: curl -X POST ${{ secrets.RENDER_DEPLOY_HOOK_URL }}